<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.css">
  <link rel="stylesheet" href="StoryStyle.css">

  <title>Unveiling the Story of Littering in Israel - Updated</title>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="index.html">Dashboard</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>

  <div id="fullpage">
    <div class="carousel slide" data-ride="carousel" id="storyCarousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <div class="section" id="section1">
            <h2 class="section-title">The Big Picture</h2>
            <p class="section-text">Our drilldown chart captures the full scope of littering incidents. Each level represents a different layer of the problem, from the general overview down to the specific types of litter found in different locations.</p>
            <div class="iframe-container">
              <iframe src="drilldown.html" style="border: 0; width: 100%; height: 100%" allowfullscreen></iframe>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="section" id="section2">
            <h2 class="section-title">Mapping the Issue</h2>
            <p class="section-text">This map displays the geographical distribution of littering incidents. By viewing the spread, we can identify the areas that require the most attention.</p>
            <div class="iframe-container" style="padding-top: 75%;">
              <iframe src="topchart.html" style="border: 0; width: 100%; height: 100%" allowfullscreen></iframe>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="section" id="section3">
            <h2 class="section-title">A Closer Look at Gender Differences</h2>
            <p class="section-text">Our SubCategory Gender Pyramid examines the distribution of littering incidents between genders. Through this, we can determine if certain genders contribute more to the problem and identify potential educational or awareness targets.</p>
            <div class="iframe-container">
              <iframe src="barchart.html" style="border: 0; width: 100%; height: 100%" allowfullscreen></iframe>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="section" id="section4">
            <h2 class="section-title">Age and Its Role</h2>
            <p class="section-text">The Population Pyramid reflects the age distribution of people involved in littering incidents. Recognizing the age groups most associated with littering can help us tailor prevention measures effectively.</p>
            <div class="iframe-container">
              <iframe src="pyramid.html" style="border: 0; width: 100%; height: 100%" allowfullscreen></iframe>
            </div>
          </div>
        </div>
      </div>

      <!-- Updated carousel control buttons at the bottom of the screen -->
      <a class="carousel-control-prev" href="#storyCarousel" role="button" data-slide="prev" aria-label="Previous">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#storyCarousel" role="button" data-slide="next" aria-label="Next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>

    <!-- Progress indicator -->
    <div class="progress">
      <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#fullpage').fullpage({
        anchors: ['section1', 'section2', 'section3', 'section4'],
        autoScrolling: true, // Enable auto scrolling
        scrollHorizontally: false, // Disable horizontal scrolling
        scrollOverflow: true, // Enable scroll overflow for iframes
        onLeave: function(origin, destination, direction) {
          const previousCard = $(origin.item);
          const currentCard = $(destination.item);
          previousCard.find('.section-title, .section-text').removeClass('show');
          currentCard.find('.section-title, .section-text').addClass('show');

          // Update progress bar
          const progressPercent = (destination.index / (destination.item.parentElement.childElementCount - 1)) * 100;
          $('.progress-bar').css('width', progressPercent + '%').attr('aria-valuenow', progressPercent);
        }
      });

      // Function to move to a specific section when a navigation button is clicked
      function moveToSection(sectionIndex) {
        $.fn.fullpage.moveTo(sectionIndex);
      }
    });
  </script>
</body>
</html>
